<ion-header>
    <ion-toolbar>
        <ion-grid style="width: 100%;margin: 0">
            <ion-row>
                <ion-col class="align-content-lg-start" >
                </ion-col>
                <ion-col class="right-align">
                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-toolbar>
</ion-header>
<ion-content padding>
    <div class="row">
        <form class="col s12">
            <div class="row">
                <div class="input-field col s12">
                    <select [(ngModel)]="currentGoal" name="currentGoal" (ngModelChange)="changeGoal()"
                            id="goals" materialize="material_select" [materializeSelectOptions]="goals">
                        <option value="" disabled selected>Цель переговоров</option>
                        <option *ngFor="let goal of goals" [value]="goal.id">{{goal.name}}</option>
                    </select>
                </div>
                <div class="input-field col s12">
                    <input id="summary" type="text" class="validate"
                           [formControl]="summary" required>
                    <label for="summary">Краткое содержание переговоров</label>
                </div>
                <div class="input-field col s12">
                    <ion-spinner *ngIf="loadProducts"></ion-spinner>
                    <select *ngIf="!loadProducts" [(ngModel)]="currentProduct" name="currentProduct"
                            (ngModelChange)="changeProduct($event)"
                            id="products" materialize="material_select" [materializeSelectOptions]="products">
                        <option value="" disabled selected>Продукты</option>
                        <option *ngFor="let product of products" [value]="product.id">{{product.name}}</option>
                    </select>
                </div>
                <div class="input-field col s12">
                    <input id="volume" type="number" class="validate"
                           [formControl]="volume" required>
                    <label for="volume">Объем в год</label>
                </div>
                <div class="input-field col s12">
                    <ion-spinner *ngIf="loadMethod"></ion-spinner>
                    <select *ngIf="!loadMethod" [(ngModel)]="currentMethod" name="currentMethod"
                            (ngModelChange)="changeMethod($event)"
                            id="methods" materialize="material_select" [materializeSelectOptions]="posts">
                        <option value="" disabled selected>Способ закупки</option>
                        <option *ngFor="let method of methods" [value]="method.id">{{method.name}}</option>
                    </select>
                </div>
                <div class="input-field col s12">
                    <select [(ngModel)]="currentSupplier" name="currentSupplier"
                            (ngModelChange)="changeSupplier($event)"
                            id="suppliers" materialize="material_select" [materializeSelectOptions]="suppliers">
                        <option value="" disabled selected>Наименование поставщика</option>
                        <option *ngFor="let supplier of suppliers" [value]="supplier.id">{{supplier.name}}</option>
                    </select>
                </div>
                <div class="input-field col s12">
                    <select [(ngModel)]="satisfied" name="sutisfied" (ngModelChange)="changeSatisfied($event)"
                            id="satisfied" materialize="material_select">
                        <option value="" disabled selected>Довольны качеством обслуживания</option>
                        <option [value]="true">Да</option>
                        <option [value]="false">Нет</option>
                    </select>
                </div>
                <div class="input-field col s12">
                    <ion-spinner *ngIf="loadServices"></ion-spinner>
                    <select *ngIf="!loadServices" [(ngModel)]="currentServices" name="currentServices"
                            (ngModelChange)="changeService($event)"
                            id="currentServices" materialize="material_select" [materializeSelectOptions]="services"
                            multiple>
                        <option value="" disabled selected>Сервисы</option>
                        <option *ngFor="let service of services" [value]="service.id">{{service.name}}</option>
                    </select>
                </div>
                <div class="input-field col s12">
                    <input id="comment" type="text" class="validate"
                           [formControl]="comment" required>
                    <label for="comment">Комментарии</label>
                </div>
                <div class="input-field col s12">
                    <div class="file-field input-field">
                        <div class="btn blue">
                            <i class="Tiny material-icons">add</i>
                            <input (change)="chooseImage($event)" type="file" multiple>
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text" placeholder="Добавить фото. Не более 4-х.">
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div class="center-align">
            <button class="waves-effect btn blue" [disabled]="!currentGoal || !currentProduct || !currentMethod ||
            !currentSupplier || !satisfied ||
             !currentServices" (click)="moveNext()">Сохранить
            </button>
        </div>
    </div>
</ion-content>
